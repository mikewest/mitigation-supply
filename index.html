<!DOCTYPE html>


<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Web Mitigation Metrics</title>

  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com/" crossorigin>
  <link href="/style.css" rel="stylesheet" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;800&family=Roboto+Slab:wght@100;500&display=swap" rel="stylesheet" crossorigin="anonymous">
</head>
<body>
  <h1>Web Mitigation Metrics</h1>
  <article>
    <h2 id="csp">
      <a href="#csp">§</a>
      Content Security Policy
    </h2>
    <p>
      We believe that a carefully-crafted
      <a href="https://w3c.github.io/webappsec-csp/">Content Security Policy</a>
      can help protect web applications from injection attacks that would otherwise lead to script
      execution. <a href="https://web.dev/strict-csp/">Strict CSP</a> is a
      reasonable approach, one which we'd like to encourage.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      and represents the percentage of Chrome page loads that use CSP at all, that define a
      <a href="https://csp.withgoogle.com/docs/strict-csp.html">Strict CSP</a>, and that define
      a Strict<em>er</em> CSP that avoids <code>'strict-dynamic'</code>.
    </p>
      
    <canvas id="csp_usage"></canvas>

    <section>
        <h3>
          Web Platform Tests:
          <a href="https://wpt.fyi/results/content-security-policy?label=master&label=experimental&aligned"><code>/content-security-policy</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-most">93.97%</td>
              
              <td class="passes-most">93.99%</td>
              
              <td class="passes-many">71.53%</td>
              
              <td class="passes-many">58.06%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <article>
    <h2 id="trusted-types">
      <a href="#trusted-types">§</a>
      Trusted Types
    </h2>
    <p>
      <a href="https://github.com/w3c/webappsec-trusted-types/">Trusted Types</a> give developers
      the ability to avoid the risks of dumping raw strings into DOM methods and setters that can
      cause script execution.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      and represents the percentage of Chrome page loads that use Trusted Types in enforcing or
      reporting mode or both, only in enforcing mode and only in reporting mode.
    </p>
      
    <canvas id="tt_usage"></canvas>

    <canvas id="tt_creation"></canvas>
    <section>
        <h3>
          Web Platform Tests: 
          <a href="https://wpt.fyi/results/trusted-types?label=master&label=experimental&aligned"><code>/trusted-types</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">99.87%</td>
              
              <td class="passes-all">99.87%</td>
              
              <td class="passes-few">18.45%</td>
              
              <td class="passes-few">18.70%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <article>
    <h2 id="isolation">
      <a href="#isolation">§</a>
      Isolation
    </h2>
    <p>
      <code>Cross-Origin-Opener-Policy</code> and <code>Cross-Origin-Embedder-Policy</code> help
      developers mitigate the risk of <a href="https://meltdownattack.com/">Spectre</a> and similar
      attacks.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      and represents the percentage of Chrome page loads that use COOP and COEP, and those that
      have opted into cross-origin isolation by using both.
    </p>
      
    <canvas id="coop_coep_usage"></canvas>

    <section>
        <h3>
          Web Platform Tests:<br><br>
          CORP:
          <a href="https://wpt.fyi/results/fetch/cross-origin-resource-policy?label=master&label=experimental&aligned"><code>/fetch/cross-origin-resource-policy</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">99.19%</td>
              
              <td class="passes-all">99.19%</td>
              
              <td class="passes-all">100.00%</td>
              
              <td class="passes-all">98.04%</td>
              
            </tr>
          </tbody>
       </table>
        <h3>
          COEP: <a href="https://wpt.fyi/results/html/cross-origin-embedder-policy?label=master&label=experimental&aligned"><code>/html/cross-origin-embedder-policy</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-most">84.58%</td>
              
              <td class="passes-most">85.07%</td>
              
              <td class="passes-many">73.96%</td>
              
              <td class="passes-many">55.35%</td>
              
            </tr>
          </tbody>
       </table>
        <h3>
          COOP:<a href="https://wpt.fyi/results/html/cross-origin-opener-policy?label=master&label=experimental&aligned"><code>/html/cross-origin-opener-policy</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-most">94.87%</td>
              
              <td class="passes-most">83.55%</td>
              
              <td class="passes-most">81.12%</td>
              
              <td class="passes-few">9.41%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <!-- SRI -->
  <article>
    <h2 id="sri">
      <a href="#sri">§</a>
      Subresource Integrity
    </h2>
    <p>
      Developers can ensure that they load only the script and style resources they intend to load,
      mitigating the risk that an untrusted server could replace it maliciously, by adding
      <code>integrity</code> attributes to elements as defined in
      <a href="https://www.w3.org/TR/SRI/">Subresource Integrity</a>. This, especially
      <a href="https://w3c.github.io/webappsec-csp/#external-hash">in combination with CSP</a> is
      a powerful tool, which we'd like to encourage folks to use.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      and represents the percentage of Chrome page loads that use SRI successfully, and those that
      have resources which fail an SRI check.
    </p>
      
    <canvas id="sri_usage"></canvas>

    <section>
        <h3>
          Web Platform Tests:
          <a href="https://wpt.fyi/results/subresource_integrity/?label=master&label=experimental&aligned"><code>/subresource_integrity</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">100.00%</td>
              
              <td class="passes-all">100.00%</td>
              
              <td class="passes-all">100.00%</td>
              
              <td class="passes-all">100.00%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <!-- Sandbox -->
  <article>
    <h2 id="sandbox">
      <a href="#sandbox">§</a>
      Sandboxing
    </h2>
    <p>
      Documents can be placed into a sandbox, giving them an opaque origin, and limiting their
      ability to take certain actions, like navigating the top-level document, execute script,
      submit forms, and so on. This can be done either via the 
      <a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox"><code>sandbox</code> IFrame attribute</a>
      or via the <a href="https://w3c.github.io/webappsec-csp/#directive-sandbox"><code>sandbox</code> CSP directive</a>.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      representing the percentage of Chrome page loads that sandbox a document via either IFrame
      attributes, or CSP directives.
    </p>
      
    <canvas id="sandbox_usage"></canvas>

    <section>
        <h3>
          Web Platform Tests:
          <a href="https://wpt.fyi/results/?label=master&label=experimental&aligned&q=sandbox"><code>?"sandbox"</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">97.17%</td>
              
              <td class="passes-all">97.35%</td>
              
              <td class="passes-many">51.50%</td>
              
              <td class="passes-some">44.78%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <article>
    <h2 id="fetch-metadata">
      <a href="#fetch-metadata">§</a>
      Fetch Metadata
    </h2>
    <p>
      The information provided in the HTTP request headers defined by
      <a href="https://w3c.github.io/webappsec-fetch-metadata/">Fetch Metadata</a>
      can give servers the ability to defend themselves from side-channel attacks by making
      better decisions about which requests to respond to, and which to reject <em>a priori</em>.
      We believe that a
      <a href="https://web.dev/fetch-metadata/#how-to-use-fetch-metadata-to-protect-against-cross-origin-attacks">Resource Isolation Policy</a>
      is a robust approach to some common cross-site vulnerabilities, and we encourage its implementation.
    </p>

    <section>
        <h3>
          Web Platform Tests:
          <a href="https://wpt.fyi/results/fetch/metadata?label=master&label=experimental&aligned"><code>/fetch/metadata</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">98.42%</td>
              
              <td class="passes-all">99.70%</td>
              
              <td class="passes-all">96.53%</td>
              
              <td class="passes-some">43.51%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js" integrity="sha256-R4pqcOYV8lt7snxMQO/HSbVCFRPMdrhAFMH+vr9giYI=" crossorigin="anonymous" nonce="not-really-a-nonce"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@0.5.7/chartjs-plugin-annotation.min.js" integrity="sha256-Olnajf3o9kfkFGloISwP1TslJiWUDd7IYmfC+GdCKd4=" crossorigin="anonymous" nonce="not-really-a-nonce"></script>
  <script nonce="not-really-a-nonce">
    const colors = { red: "#e41a1c", blue: "#377eb8", green: "#4daf4a", orange: "#ff7f00", purple: "#984ea3", yellow: "#f6bf26" };
    const use_counter_days = ["2021-03-27", "2021-03-28", "2021-03-29", "2021-03-30", "2021-03-31", "2021-04-01", "2021-04-02", "2021-04-03", "2021-04-04", "2021-04-05", "2021-04-06", "2021-04-07", "2021-04-08", "2021-04-09", "2021-04-10", "2021-04-11", "2021-04-12", "2021-04-13", "2021-04-14", "2021-04-15", "2021-04-16", "2021-04-17", "2021-04-18", "2021-04-19", "2021-04-20", "2021-04-21", "2021-04-22", "2021-04-23", "2021-04-24", "2021-04-25", "2021-04-26", "2021-04-27", "2021-04-28", "2021-04-29", "2021-04-30", "2021-05-01", "2021-05-02", "2021-05-03", "2021-05-04", "2021-05-05", "2021-05-06", "2021-05-07", "2021-05-08", "2021-05-09", "2021-05-10", "2021-05-11", "2021-05-12", "2021-05-13", "2021-05-14", "2021-05-15", "2021-05-16", "2021-05-17", "2021-05-18", "2021-05-19", "2021-05-20", "2021-05-21", "2021-05-22", "2021-05-23", "2021-05-24", "2021-05-25", "2021-05-26", "2021-05-27", "2021-05-28", "2021-05-29", "2021-05-30", "2021-05-31", "2021-06-01", "2021-06-02", "2021-06-03", "2021-06-04", "2021-06-05", "2021-06-06", "2021-06-07", "2021-06-08", "2021-06-09", "2021-06-10", "2021-06-11", "2021-06-12", "2021-06-13", "2021-06-14", "2021-06-15", "2021-06-16", "2021-06-17", "2021-06-18", "2021-06-19", "2021-06-20", "2021-06-21", "2021-06-22", "2021-06-23", "2021-06-24"];
    const use_counter_buckets = {"15": [36.43727, 36.7421, 38.55861, 38.64399, 38.38268, 38.19687, 37.15596, 36.17616, 36.48175, 38.10871, 38.61139, 38.75936, 38.86905, 38.60362, 36.17097, 36.71227, 39.32957, 39.8179, 39.9706, 40.30167, 40.1608, 37.07909, 37.59393, 41.05905, 41.57901, 42.0813, 42.55145, 37.18479, 36.08598, 36.46759, 37.48035, 37.66239, 37.83436, 38.5146, 38.75, 36.0821, 36.77827, 38.69484, 38.89278, 38.61196, 38.57314, 38.23536, 35.85189, 36.24359, 38.67622, 38.65668, 38.67462, 38.764, 38.43822, 35.82699, 36.40136, 39.71592, 39.88914, 39.76543, 40.22697, 40.59312, 38.76011, 39.19342, 40.66033, 41.18537, 42.719, 42.91489, 42.52576, 41.33188, 41.57769, 41.42796, 42.79851, 43.09118, 43.36469, 43.07676, 41.4161, 41.33635, 41.27898, 41.53894, 41.80724, 42.08061, 42.09372, 41.95087, 42.20904, 42.24987, 41.99088, 42.08691, 42.0945, 41.83238, 41.89948, 42.03003, 42.17619, 42.08961, 41.98826, 41.98117], "540": [9.37061, 9.3368, 8.98059, 8.87061, 8.86763, 9.01197, 9.3278, 9.34548, 9.20675, 9.11685, 8.94073, 8.8487, 8.84066, 8.84576, 9.29113, 9.22165, 8.72789, 8.723, 8.74685, 8.66381, 8.66931, 9.30302, 9.16436, 8.50257, 8.37135, 8.35536, 8.20908, 9.26138, 9.2409, 9.1837, 9.20604, 9.17166, 9.11848, 8.98831, 9.04416, 9.38564, 9.36508, 9.14636, 9.1754, 9.05185, 8.93486, 8.90648, 9.29954, 9.21977, 8.93519, 8.91517, 8.94179, 8.87599, 8.90029, 9.26185, 9.2638, 8.82098, 8.84921, 8.88391, 8.80927, 8.90828, 9.23618, 9.1669, 8.95851, 9.0292, 8.97656, 8.88221, 9.01287, 9.22578, 9.07576, 9.10728, 8.99219, 8.96538, 8.8873, 8.91355, 9.21171, 9.07683, 9.22976, 9.27463, 9.21711, 9.1852, 9.2641, 9.23232, 9.23122, 9.30622, 9.22174, 9.26706, 9.25025, 9.25478, 9.19789, 9.13655, 9.28331, 9.26575, 9.30617, 9.29711], "541": [0.01816, 0.01901, 0.02058, 0.02092, 0.02464, 0.02422, 0.02405, 0.02372, 0.0278, 0.02385, 0.01983, 0.01963, 0.02005, 0.01953, 0.01835, 0.01856, 0.01865, 0.01801, 0.01816, 0.01857, 0.01837, 0.01902, 0.01856, 0.0183, 0.01828, 0.01866, 0.01798, 0.01822, 0.0174, 0.01845, 0.02136, 0.03063, 0.02748, 0.02108, 0.02043, 0.02028, 0.02063, 0.02186, 0.02085, 0.02139, 0.0212, 0.02074, 0.02013, 0.02107, 0.02092, 0.02108, 0.02514, 0.02069, 0.01997, 0.0199, 0.01966, 0.01996, 0.02021, 0.02043, 0.02028, 0.02045, 0.01987, 0.01924, 0.02179, 0.02204, 0.02207, 0.02419, 0.03087, 0.02426, 0.02263, 0.02429, 0.02574, 0.02492, 0.02478, 0.02327, 0.02018, 0.0207, 0.02769, 0.02669, 0.02614, 0.02406, 0.02262, 0.01984, 0.02039, 0.02299, 0.02262, 0.02317, 0.02309, 0.02245, 0.02076, 0.02006, 0.02545, 0.03623, 0.02737, 0.02539], "672": [20.42044, 20.50512, 18.23605, 18.15803, 17.997, 18.29188, 19.70577, 20.6579, 20.40957, 18.58568, 18.01238, 18.03878, 18.10938, 18.63901, 20.60928, 20.30918, 18.05939, 18.04931, 17.88267, 17.65764, 17.82429, 19.79911, 19.41541, 16.93158, 16.47686, 16.24098, 20.33612, 19.94172, 20.87241, 20.69111, 18.68171, 18.61146, 18.53126, 18.47445, 18.71839, 20.7219, 20.54418, 18.50917, 18.46294, 18.25965, 18.04665, 18.28269, 20.05669, 19.85826, 17.92338, 18.0471, 18.22263, 18.33557, 18.4734, 20.17985, 19.99421, 17.9177, 17.96308, 17.98758, 17.91274, 18.32406, 20.19145, 19.94075, 18.13826, 18.05944, 18.132, 17.9307, 18.35269, 19.86182, 19.47662, 18.12971, 17.76835, 17.90798, 18.18612, 18.81624, 19.32729, 18.85982, 17.33994, 17.71678, 18.0304, 18.19019, 18.67294, 20.23864, 20.07799, 18.31092, 18.11259, 18.19881, 18.26734, 18.72475, 20.34161, 19.98309, 18.57593, 18.57374, 18.4936, 18.39157], "673": [0.20634, 0.20943, 0.21411, 0.20945, 0.20767, 0.21739, 0.24744, 0.2541, 0.23391, 0.23789, 0.22677, 0.2186, 0.21211, 0.21224, 0.20557, 0.20956, 0.21521, 0.21368, 0.21439, 0.21484, 0.22568, 0.24384, 0.24151, 0.22961, 0.23113, 0.22941, 0.21726, 0.2191, 0.2031, 0.20579, 0.22972, 0.2225, 0.22358, 0.22892, 0.23888, 0.23817, 0.23731, 0.24286, 0.24009, 0.2341, 0.22639, 0.21767, 0.2056, 0.20874, 0.2188, 0.21634, 0.21738, 0.21929, 0.21943, 0.21552, 0.22131, 0.22471, 0.22212, 0.22067, 0.21469, 0.21115, 0.19861, 0.20407, 0.21761, 0.21686, 0.21662, 0.21683, 0.22489, 0.21372, 0.21606, 0.2111, 0.23373, 0.23355, 0.23467, 0.22398, 0.20286, 0.20814, 0.23249, 0.22987, 0.22812, 0.22945, 0.23209, 0.21249, 0.21091, 0.23589, 0.22719, 0.22691, 0.22502, 0.21965, 0.19649, 0.20215, 0.22646, 0.2251, 0.22306, 0.22534], "2722": [0.93236, 1.1104, 1.91157, 1.91721, 1.86386, 1.73058, 1.28312, 0.86816, 1.0067, 1.72161, 1.92849, 1.94286, 1.95479, 1.77419, 0.94186, 1.18889, 2.07803, 2.15186, 2.25391, 2.32677, 2.21576, 1.25337, 1.55672, 2.69043, 2.92768, 3.07935, 3.3997, 3.33221, 1.09055, 1.30932, 2.01512, 2.05825, 2.18971, 2.34955, 2.18851, 1.27719, 1.51146, 2.47574, 2.55164, 2.66541, 2.74606, 2.6738, 1.63309, 1.90476, 3.053, 3.06334, 3.04929, 3.00646, 2.8575, 1.7134, 2.02854, 3.23785, 3.21379, 3.18302, 3.20397, 2.92973, 1.80264, 2.10136, 3.12205, 3.20577, 3.15947, 3.18573, 2.84424, 1.88717, 2.16677, 2.70946, 3.36723, 3.43628, 3.47673, 3.14995, 2.14424, 2.3954, 3.0796, 3.02181, 3.00481, 3.0816, 2.86059, 2.14276, 2.37724, 3.10613, 3.08758, 3.0893, 3.02854, 2.71995, 2.07957, 2.34506, 3.04356, 3.0175, 2.96105, 2.95813], "2723": [58.64876, 58.60249, 55.37574, 55.08819, 54.93019, 55.29732, 57.19232, 58.84735, 58.73312, 56.03142, 55.25067, 55.1568, 55.21165, 55.89401, 58.48025, 58.29278, 55.33831, 55.44158, 55.50461, 55.33383, 55.8788, 58.31316, 57.99388, 54.84175, 54.56568, 54.39297, 54.38346, 57.4819, 59.11532, 58.88275, 56.01864, 55.88293, 56.13763, 56.24057, 56.66636, 59.46518, 59.41882, 56.87465, 56.85148, 56.58721, 56.38278, 56.62722, 59.04863, 58.80667, 56.25761, 56.44384, 56.69825, 56.95082, 57.27221, 59.39023, 59.03559, 56.38838, 56.5716, 56.58901, 56.49836, 56.86399, 59.25621, 59.02152, 56.68658, 56.66414, 56.75295, 56.66606, 57.16139, 59.14115, 58.90755, 57.05673, 56.29478, 56.4977, 56.91952, 57.29007, 58.98377, 58.05967, 55.35238, 55.73343, 56.01662, 56.15579, 56.87048, 59.08854, 59.1596, 56.53919, 56.0655, 56.06338, 56.10123, 56.52794, 58.75381, 58.23665, 55.68519, 56.22219, 56.53456, 56.42224], "2724": [0.00158, 0.0016, 0.00401, 0.00421, 0.00439, 0.00438, 0.00366, 0.00151, 0.00124, 0.00427, 0.00413, 0.00405, 0.00411, 0.00322, 0.00162, 0.00146, 0.00409, 0.00423, 0.00434, 0.00425, 0.00366, 0.00191, 0.00179, 0.00473, 0.00527, 0.00559, 0.00543, 0.00462, 0.00282, 0.00293, 0.00304, 0.00325, 0.00377, 0.00395, 0.00308, 0.00148, 0.00135, 0.00387, 0.00415, 0.0041, 0.00389, 0.0032, 0.0015, 0.00115, 0.00403, 0.00429, 0.00439, 0.0043, 0.00344, 0.00155, 0.00155, 0.00425, 0.00431, 0.00439, 0.00431, 0.00349, 0.00148, 0.00154, 0.00455, 0.00469, 0.00474, 0.00481, 0.00377, 0.00196, 0.00146, 0.00256, 0.00571, 0.00569, 0.00569, 0.00467, 0.00228, 0.00185, 0.00428, 0.00426, 0.00435, 0.00443, 0.00363, 0.0016, 0.00161, 0.00449, 0.00472, 0.00475, 0.00459, 0.00351, 0.00166, 0.00146, 0.00472, 0.00489, 0.00498, 0.00495], "3132": [11.35848, 11.92788, 14.15675, 14.13194, 13.91425, 13.51322, 12.15444, 11.16551, 11.65394, 13.60656, 14.24359, 14.32649, 14.45557, 14.00482, 11.24882, 12.06246, 15.12485, 15.83661, 16.0112, 16.33413, 16.19709, 13.12981, 14.11378, 17.47703, 18.0813, 18.42437, 19.1583, 19.25652, 11.54578, 12.24335, 13.70797, 13.85915, 14.26659, 15.03778, 15.59532, 11.19069, 11.84432, 14.49826, 14.6001, 14.65003, 14.81662, 14.2943, 11.36029, 12.02025, 15.14275, 15.15848, 15.09096, 15.04237, 14.61912, 11.4245, 12.27394, 16.98233, 17.32312, 17.24335, 17.88624, 18.23722, 16.04456, 16.7821, 18.75397, 19.51607, 21.75766, 21.79863, 21.20047, 19.59513, 20.20963, 20.68598, 21.80747, 22.1334, 22.22166, 21.64414, 19.73375, 20.02779, 20.26706, 20.33584, 20.4381, 20.6162, 20.3462, 19.69473, 20.2072, 20.65251, 20.48434, 20.55943, 20.44429, 20.00825, 19.55417, 19.91338, 20.09439, 20.22511, 20.24121, 20.07219], "3137": [6.38226, 6.92672, 8.99523, 8.96816, 8.7734, 8.30183, 6.96553, 6.07247, 6.51305, 8.30875, 8.94759, 9.03754, 9.15463, 8.70882, 6.28827, 7.05285, 9.6042, 9.72143, 9.84922, 10.16309, 9.96502, 7.14829, 8.10272, 11.40216, 12.09782, 12.46093, 13.09349, 13.00082, 5.4842, 6.12681, 7.68623, 7.85649, 8.2602, 8.76479, 8.38035, 6.1327, 6.77856, 9.22002, 9.3549, 9.4276, 9.59624, 9.06499, 6.38029, 7.01885, 9.77232, 9.79999, 9.71353, 9.627, 9.1317, 6.33607, 7.0907, 9.9197, 9.92963, 9.82885, 9.85398, 9.05756, 6.4034, 7.12677, 9.42945, 9.61324, 9.50235, 9.59314, 8.82585, 6.54238, 7.25744, 8.46459, 9.80044, 9.85286, 9.80479, 8.8928, 6.53841, 7.04584, 8.28552, 8.1031, 7.98749, 8.11601, 7.62525, 6.09807, 6.61604, 8.13995, 8.10059, 8.08735, 7.96164, 7.26983, 5.94474, 6.49627, 7.7864, 7.77173, 7.68861, 7.63811], "3160": [0.91761, 1.0929, 1.87786, 1.88388, 1.82941, 1.69965, 1.25826, 0.85461, 0.99063, 1.68964, 1.87884, 1.89255, 1.90501, 1.72768, 0.91424, 1.15706, 2.0268, 2.09705, 2.19438, 2.26467, 2.15525, 1.21344, 1.51168, 2.63239, 2.87559, 3.02861, 3.35326, 3.28717, 1.07097, 1.28619, 3.99674, 2.01967, 2.13552, 2.29251, 2.13546, 1.24218, 1.4732, 2.41806, 2.49297, 2.60645, 2.68822, 2.62133, 1.60033, 1.86825, 2.997, 3.00696, 2.99376, 2.94454, 2.77822, 1.6512, 1.96049, 3.15361, 3.1071, 3.06985, 3.08402, 2.8082, 1.67901, 1.97731, 2.99406, 3.07553, 3.03332, 3.03726, 2.6981, 1.73585, 2.01425, 2.55798, 3.20363, 3.1945, 3.14158, 2.79097, 1.74768, 1.98723, 2.70663, 2.6329, 2.5916, 2.65025, 2.43683, 1.68055, 1.89521, 2.67228, 2.65886, 2.65676, 2.5916, 2.27662, 1.61344, 1.86109, 2.57942, 2.55409, 2.52475, 2.51689], "3161": [0.02078, 0.02611, 0.0569, 0.05734, 0.05836, 0.05395, 0.04215, 0.01972, 0.02446, 0.12851, 0.64118, 0.60466, 0.59462, 0.54371, 0.37338, 0.42814, 0.61433, 0.60498, 0.62146, 0.62764, 0.59021, 0.41913, 0.47584, 0.41872, 0.09165, 0.08458, 0.07918, 0.07395, 0.02695, 0.03405, 0.06283, 0.10265, 0.62825, 0.61998, 0.56219, 0.37148, 0.42344, 0.63123, 0.62993, 0.63027, 0.61845, 0.56607, 0.38365, 0.43127, 0.63229, 0.61898, 0.61337, 0.59755, 0.5792, 0.40843, 0.46313, 0.65836, 0.67454, 0.68191, 0.68545, 0.63645, 0.47819, 0.52152, 0.69742, 0.70704, 0.70235, 0.75013, 0.71193, 0.54957, 0.60528, 0.75938, 0.85801, 0.91594, 0.99667, 0.92041, 0.85882, 0.93288, 1.1236, 1.10301, 1.10672, 1.12273, 1.04144, 0.87444, 0.95117, 1.12448, 1.12287, 1.12872, 1.12469, 1.05301, 0.86815, 0.95261, 1.15831, 1.15773, 1.1271, 1.12393], "3197": [0.41948, 0.40688, 0.36638, 0.36398, 0.36506, 0.37664, 0.40699, 0.42976, 0.42606, 0.36869, 0.35779, 0.35468, 0.35551, 0.36838, 0.41162, 0.39648, 0.3465, 0.34289, 0.34407, 0.339, 0.35017, 0.47656, 0.39206, 0.33208, 0.34262, 0.33252, 0.31566, 0.40209, 0.42651, 0.41584, 0.3894, 0.38774, 0.38616, 0.38608, 0.39795, 0.4439, 0.43121, 0.38157, 0.39644, 0.38633, 0.38033, 0.38612, 0.44483, 0.43041, 0.37425, 0.38533, 0.3896, 0.39695, 0.40472, 0.45969, 0.44281, 0.3815, 0.39348, 0.39745, 0.39412, 0.4078, 0.4614, 0.44759, 0.39292, 0.39425, 0.39799, 0.39063, 0.40153, 0.44668, 0.43048, 0.39845, 0.38938, 0.39231, 0.3924, 0.43545, 0.47023, 0.46295, 0.42389, 0.4224, 0.41831, 0.41467, 0.42548, 0.47828, 0.4615, 0.41969, 0.41048, 0.4111, 0.41261, 0.42556, 0.45725, 0.4396, 0.40349, 0.40959, 0.41456, 0.30204], "3198": [1.39176, 1.26436, 1.03695, 1.02779, 1.03825, 1.11222, 1.08967, 1.09788, 1.05452, 0.8549, 0.79465, 0.79289, 0.79443, 1.00011, 1.44728, 1.34937, 1.11677, 1.11977, 1.14868, 1.15972, 1.25837, 1.62402, 1.49237, 1.15373, 1.18763, 1.23434, 1.17427, 1.27235, 1.46197, 1.37616, 1.22138, 1.20572, 1.2173, 1.19815, 1.32421, 1.53257, 1.43511, 1.2173, 1.20535, 1.21188, 1.20656, 1.29917, 1.53772, 1.45906, 1.19291, 1.18616, 1.23976, 1.26184, 1.31861, 1.55743, 1.44767, 1.20835, 1.27157, 1.44555, 1.44713, 1.58753, 1.90523, 1.75325, 1.46805, 1.46538, 1.47263, 1.47269, 1.58832, 1.88187, 1.78587, 1.59151, 1.48405, 1.47205, 1.52365, 2.13192, 2.37751, 2.20246, 1.94781, 1.8943, 1.87817, 1.86744, 1.98272, 2.18357, 2.08427, 1.85578, 1.85335, 1.87473, 1.8989, 2.02312, 2.20861, 2.11415, 1.88997, 1.89994, 1.92292, 2.07971], "3199": [0.17224, 0.16849, 0.17153, 0.17215, 0.17376, 0.17381, 0.1704, 0.171, 0.17014, 0.17251, 0.16736, 0.16768, 0.1673, 0.16895, 0.17008, 0.16995, 0.17044, 0.17054, 0.16896, 0.16768, 0.16732, 0.17431, 0.16665, 0.1663, 0.16188, 0.16248, 0.15834, 0.17787, 0.17531, 0.17292, 0.17874, 0.18289, 0.18661, 0.21133, 0.26481, 0.26139, 0.26177, 0.26439, 0.26661, 0.27632, 0.29147, 0.29168, 0.29257, 0.29492, 0.29463, 0.29741, 0.56284, 0.9716, 0.9809, 0.97608, 0.97458, 0.96465, 0.96635, 0.96176, 0.95511, 0.97091, 0.98504, 0.98967, 0.97368, 0.95595, 0.95528, 0.94105, 0.93567, 0.94561, 0.9418, 0.90107, 0.93174, 0.92615, 0.92906, 0.94179, 0.99186, 0.96644, 0.91004, 0.91968, 4.15295, 5.14828, 5.39025, 6.24009, 6.27254, 5.21023, 5.09178, 5.16408, 5.22669, 5.53292, 6.39809, 6.37952, 5.40434, 5.37153, 5.4461, 5.51689], "3200": [0.00283, 0.00261, 0.00298, 0.00273, 0.0026, 0.00275, 0.0029, 0.00294, 0.00281, 0.00261, 0.00267, 0.00268, 0.00278, 0.00281, 0.00287, 0.0027, 0.00259, 0.00281, 0.00283, 0.00293, 0.00298, 0.00324, 0.00298, 0.0031, 0.00323, 0.00334, 0.00334, 0.00288, 0.00342, 0.00304, 0.0032, 0.00297, 0.00285, 0.00295, 0.00315, 0.00322, 0.00319, 0.00407, 0.00327, 0.00324, 0.00321, 0.00327, 0.0033, 0.00299, 0.00297, 0.00312, 0.00315, 0.00314, 0.00331, 0.00326, 0.00305, 0.00302, 0.00312, 0.00323, 0.00319, 0.00317, 0.00315, 0.00305, 0.003, 0.00328, 0.00886, 0.00977, 0.00856, 0.00355, 0.00333, 0.00371, 0.0088, 0.0092, 0.00963, 0.00912, 0.00335, 0.00327, 0.01074, 0.01808, 0.00706, 0.0042, 0.00424, 0.00313, 0.00305, 0.00478, 0.00462, 0.00426, 0.00416, 0.00384, 0.003, 0.00303, 0.00376, 0.00409, 0.00395, 0.00388], "3274": [7.1329, 7.2819, 7.2267, 7.1032, 6.9373, 7.0892, 7.1973, 6.9543, 6.9832, 7.2952, 7.3098, 7.2463, 7.303, 7.1317, 7.0263, 7.3369, 7.181, 7.3456, 7.3149, 7.3416, 7.4357, 7.1001, 7.196, 7.3453, 7.3645, 7.325, 7.39, 7.2013, 6.6763, 6.9592, 7.2005, 7.2731, 7.316, 7.3569, 7.362, 6.6707, 6.9033, 7.4283, 7.5331, 7.428, 7.3886, 7.3694, 6.6696, 6.8231, 7.3323, 7.4055, 7.3969, 7.2907, 7.243, 6.4126, 6.7087, 7.216, 7.2428, 7.2726, 7.1848, 7.1378, 6.3665, 6.5926, 7.0867, 7.1477, 7.0117, 6.8938, 6.7145, 6.2023, 6.3274, 6.4682, 6.6201, 6.5976, 6.4963, 6.3919, 6.0484, 6.2392, 6.3918, 6.3574, 6.3004, 6.3043, 6.2086, 5.9666, 6.1459, 6.3043, 6.2021, 6.1637, 6.1389, 6.0075, 5.7321, 5.9681, 6.3566, 6.2323, 6.0429, 6.0754], "3433": [0.41667, 0.41416, 0.48217, 0.72028, 1.11465, 1.21705, 1.0553, 0.96881, 1.0105, 1.09214, 1.13193, 1.14162, 1.10952, 0.94745, 0.91872, 0.92187, 0.90609, 0.91068, 0.91035, 0.89269, 0.8664, 0.89868, 0.89666, 0.85664, 0.85741, 0.84775, 1.04099, 1.05491, 0.98676, 0.99173, 1.07203, 1.09146, 1.12163, 1.16435, 1.15006, 1.00919, 1.02499, 1.18948, 1.20768, 1.20159, 1.22965, 1.19946, 1.0226, 1.04652, 1.20553, 1.71814, 2.1162, 2.12631, 2.12238, 2.01351, 1.98661, 2.11501, 2.12315, 1.98125, 1.98713, 1.94284, 1.77117, 1.77021, 1.93241, 1.96022, 1.95594, 1.96031, 1.90061, 1.76914, 1.79506, 1.92173, 1.94896, 1.94931, 1.98266, 2.09334, 2.1419, 2.07722, 2.16702, 2.15984, 2.1465, 2.15337, 2.14143, 2.0159, 2.01443, 2.1188, 2.13071, 2.12469, 2.11625, 2.08797, 1.97013, 1.97405, 2.04827, 2.08062, 2.08146, 2.08851], "3881": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0, 0.0002]}

    // Vertical lines for Chrome milestones:
    const milestones = { 'M87': '2020-11-17', 'M86': '2020-10-06' };
    const annotations = Object.entries(milestones).map(([m, date]) => {
      return {
        id: m,
        type: 'line',
        mode: 'vertical',
        scaleID: 'x-axis-0',
        value: use_counter_days.find(v => v == date),
        borderColor: colors["orange"],
        borderWidth: 1,
        label: {
          backgroundColor: colors["orange"],
          content: m,
          enabled: true,
          position: "bottom",
          yAdjust: 5
        }
      };
    });

    // Configure chart options:
    const chart_options = {
      scales: {
        yAxes: [
          {
            ticks: {
              beginAtZero: true,
              callback: (v) => { return v + '%'; }
            },
            scaleLabel: {
              display: true,
              labelString: 'Percentage of Page Views'
            }
          }
        ]
      },
      annotation: { annotations: annotations }
    };

    // Configure charts:
    const charts = [{
        id: "csp_usage",
        data: [{
            label: "All CSP",
            color: "red",
            useCounter: 15
          }, {
            label: "Strict CSP",
            color: "blue",
            useCounter: 3132
          }, {
            label: "Stricter CSP",
            color: "green",
            useCounter: 3137
          }, {
            label: "<iframe csp>",
            color: "purple",
            useCounter: 3274
          }]
      }, {
        id: "tt_usage",
        data: [{
            label: "Trusted Types",
            color: "red",
            useCounter: 2722
          }, {
            label: "Report-Only",
            color: "blue",
            useCounter: 3161
          }, {
            label: "Enforced",
            color: "green",
            useCounter: 3160
          }]
      }, {
        id: "tt_creation",
        data: [{
            label: "Policy Creation",
            color: "red",
            useCounter: 2723
          }]
      }, {
        id: "sri_usage",
        data: [{
            label: "SRI Blocked Resource",
            color: "red",
            useCounter: 541
          }, {
            label: "SRI Validated Resource",
            color: "green",
            useCounter: 540
          }]
      }, {
        id: "sandbox_usage",
        data: [{
            label: "Sandbox via IFrame",
            color: "blue",
            useCounter: 672
          }, {
            label: "Sandbox via CSP",
            color: "green",
            useCounter: 673
          }]
      }, {
        id: "coop_coep_usage",
        data: [{
            label: "COOP: same-origin",
            color: "blue",
            useCounter: 3197
          }, {
            label: "COOP: same-origin-allow-popups",
            color: "green",
            useCounter: 3198
          }, {
            label: "COOP Report-Only",
            color: "yellow",
            useCounter: 3433
          }, {
            label: "COEP: credentialless",
            color: "orange",
            useCounter: 3881
          }, {
            label: "COEP: require-corp",
            color: "red",
            useCounter: 3199
          }, {
            label: "Cross-Origin Isolated",
            color: "purple",
            useCounter: 3200
          }]
      }
    ];

    charts.forEach(c => {
      new Chart(c.id, {
        type: "line",
        options: chart_options,
        data: {
          labels: use_counter_days,
          datasets: c.data.map(d => {
            return {
              label: d.label,
              borderColor: colors[d.color],
              data: use_counter_buckets[d.useCounter + ""]
            };
          })
        }
      });
    });
  </script>
  <footer>
    Something you'd like to see? <a href="https://github.com/mikewest/mitigation-supply">File an issue!</a> &ndash; Updated on 2021-06-26.
  </footer>
</body>
</html>
